<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Stock Analysis Dashboard{% endblock %}</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        dark: {
                            bg: '#0f1115',
                            card: '#181b21',
                            sidebar: '#131519',
                            border: '#2a2e35'
                        },
                        primary: {
                            DEFAULT: '#3b82f6',
                            glow: 'rgba(59, 130, 246, 0.5)'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* CustomScrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f1115;
        }

        ::-webkit-scrollbar-thumb {
            background: #2a2e35;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        .glass-card {
            background: rgba(24, 27, 33, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-dark-bg text-white font-sans min-h-screen">

    <!-- Mobile Toggle -->
    <button class="fixed top-4 right-4 z-50 md:hidden bg-dark-card border border-dark-border text-white p-2 rounded-lg"
        onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside id="sidebar"
            class="w-64 bg-dark-sidebar border-r border-dark-border fixed h-full left-0 top-0 z-40 transform -translate-x-full md:translate-x-0 transition-transform duration-300 flex flex-col p-5">
            <div class="flex items-center gap-2 text-xl font-bold text-white mb-10 px-2">
                <i class="fas fa-chart-line text-blue-500 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
                TradeBuddy
            </div>

            <nav class="flex-1 overflow-y-auto">
                <!-- Section Manager -->
                <div class="text-[11px] uppercase tracking-wider text-gray-500 font-semibold mb-2 pl-4">ALGO MANAGER
                </div>
                <a href="/signals"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all mb-1 {% if 'signals' in request.path %}bg-blue-500/10 text-blue-500 border-l-4 border-blue-500{% endif %}">
                    <i class="fas fa-signal w-5"></i>
                    Algo Signals
                </a>
                <a href="/logs"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all mb-1 {% if 'logs' in request.path %}bg-blue-500/10 text-blue-500 border-l-4 border-blue-500{% endif %}">
                    <i class="fas fa-file-alt w-5"></i>
                    Algo Signals Logs
                </a>

                <!-- Broker -->
                <div class="text-[11px] uppercase tracking-wider text-gray-500 font-semibold mb-2 mt-6 pl-4">BROKER
                </div>
                <a href="/broker/dashboard"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all mb-1 {% if 'dashboard' in request.path %}bg-blue-500/10 text-blue-500 border-l-4 border-blue-500{% endif %}">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    Dashboard
                </a>
                <a href="/broker/orders"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all mb-1 {% if 'orders' in request.path %}bg-blue-500/10 text-blue-500 border-l-4 border-blue-500{% endif %}">
                    <i class="fas fa-list w-5"></i>
                    Orders
                </a>
                <a href="/broker/positions"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all mb-1 {% if 'positions' in request.path %}bg-blue-500/10 text-blue-500 border-l-4 border-blue-500{% endif %}">
                    <i class="fas fa-layer-group w-5"></i>
                    Positions
                </a>

                <div class="h-px bg-dark-border my-5"></div>

                <a href="#" onclick="location.reload()"
                    class="flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition-all">
                    <i class="fas fa-sync-alt w-5"></i>
                    Refresh Data
                </a>
            </nav>

            <div class="mt-auto pt-4 border-t border-dark-border">
                <a href="https://njtechstudio.vercel.app/" target="_blank"
                    class="flex items-center justify-center gap-2 text-[10px] text-gray-600 hover:text-blue-500 transition-colors">
                    <span>Developer by</span>
                    <span class="font-bold">NJTechStudio</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 md:ml-64 p-4 md:p-8 w-full">
            {% block content %}
            {% endblock %}
        </main>
    </div>

    <!-- Scripts -->
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');

            // Close sidebar when clicking outside on mobile
            if (!sidebar.classList.contains('-translate-x-full')) {
                const overlay = document.createElement('div');
                overlay.id = 'sidebar-overlay';
                overlay.className = 'fixed inset-0 bg-black/50 z-30 md:hidden';
                overlay.onclick = () => {
                    sidebar.classList.add('-translate-x-full');
                    overlay.remove();
                };
                document.body.appendChild(overlay);
            } else {
                const overlay = document.getElementById('sidebar-overlay');
                if (overlay) overlay.remove();
            }
        }
    </script>

    {% block scripts %}
    {% endblock %}
</body>

</html>